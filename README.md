# ✅ CodeJudge: C 기반 TCP 자동 코드 채점 시스템

> 클라이언트가 제출한 C 코드 파일을 서버에서 자동으로 컴파일, 실행, 평가하는  
> **TCP 기반 리눅스 채점 시스템**입니다.

---

## 📌 프로젝트 개요

**CodeJudge**는 사용자가 제출한 프로그램을 **리눅스 서버에서 자동으로 채점하고 결과를 되돌려주는 시스템**입니다.  
컴파일 여부, 런타임 오류, 정답 여부, 실행 시간, 메모리 사용량까지 평가하며, 교육용 온라인 채점기의 구조를 학습하고 구현했습니다.

---

## 🛠️ 사용 기술

| 분야 | 기술 |
|------|------|
| 언어 | C, Bash |
| 운영체제 | Linux (Ubuntu 기반) |
| 네트워크 | TCP/IP, 소켓 프로그래밍 |
| 프로세스 | `fork()`, `pipe()`, `execl()` |
| 파일 전송 | 바이너리 전송 + 헤더 기반 커스텀 프로토콜 |
| 기타 | make, gcc, 리눅스 파일 시스템, 입출력 스트림 |

---

## 💡 시스템 구성
[Client]

사용자 코드 전송

채점 결과 수신 및 출력


[Server]

TCP 소켓 서버 실행

파일 수신 및 저장

fork()로 채점 프로세스 분기

execl()로 judge 프로그램 실행

결과를 클라이언트로 전송


## 🔍 핵심 기능

- ✅ 클라이언트 → 서버로 C 소스코드 전송 (헤더 + 바이너리 조합 전송)
- ✅ 서버에서 자동 컴파일 → 실행 → 결과 평가
- ✅ 테스트 케이스를 기준으로 정답 여부(WA, CE, RE 등) 판단
- ✅ 실행 시간 및 메모리 사용량 측정
- ✅ 결과를 클라이언트로 전송 및 출력

---

## ⚠️ 문제점 & 해결 방법

| 문제 | 해결 방법 |
|------|-----------|
| 다양한 에러 (컴파일 에러, 런타임 에러, 출력 오답) 구분 어려움 | `stderr` 리디렉션, exit code, 로그 파일 구분 사용 |
| judge 프로세스가 무한 생성되는 문제 | `fork()` 후 `wait()` 및 timeout 정책 적용 |
| 파일 전송 중 포맷 깨짐 | 커스텀 헤더(16byte) 설계 및 전송 완료 확인 후 저장 |
| 동시에 여러 클라이언트가 접속 시 결과 충돌 | `fork()` 기반 분기 및 client pid 기반 temp 파일 관리 |


---

## 🖥️ 실행 예시

### 🖥 서버 실행

```bash
$ gcc server.c -o server
$ ./server 12345
💻 클라이언트 실행

$ gcc client.c -o client
$ ./client 127.0.0.1 12345 sample_code.c


📝 실행 결과 예시
>> Code Received.
>> Compiling...
>> Compilation Success.
>> Running Testcase 1... Accepted
>> Time: 0.013s, Memory: 128KB

```
## 📌 아쉬운 점
다양한 언어 지원 미구현 (현재 C만 지원)

클라이언트 GUI 없음 (CLI 기반)

여러 judge가 동시에 실행될 경우 처리량 제한 없음

포트별 결과 관리 미흡 → 향후 개선 필요

## 📈 배운 점
리눅스 시스템 프로그래밍(fork, pipe, exec 등)의 실전 활용

TCP 통신 프로토콜 설계 및 디버깅 역량 강화

동시성 이슈 해결을 위한 프로세스/파일 구조 설계 경험

간단한 온라인 저지 시스템 백엔드 구현 경험



# HOW TO USE

TCP 통신으로 파일을 전송하고, 파일을 받아 컴파일한 뒤 실행하여 결과를 클라이언트에게 보내준다.

## make 설정

### make configure

build 폴더를 만들고, 루트 디렉토리의 CMakeLists.txt를 실행한다.

### make clean

build 폴더를 완전히 삭제한다. 다음 make configure에 해당하는 동작을 수행한다.

### make

make configure 이후 실행할 수 있으며, 프로젝트 전체를 빌드한다.

## 사용 방법

```build/src/main``` 을 실행하면 TCP 서버가 49999 포트에서 열린다.

```build/src/client_test <ip> <port> <file>``` 을 실행하면 서버와 TCP 통신을 수립한 후, 파일을 전송하고 채점 결과를 전송받는다.


